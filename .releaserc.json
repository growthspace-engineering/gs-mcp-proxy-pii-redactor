{
  "branches": [
    "main",
    {
      "name": "beta",
      "prerelease": true
    }
  ],
  "plugins": [
    "@semantic-release/commit-analyzer",
    "@semantic-release/release-notes-generator",
    [
      "@semantic-release/exec",
      {
        "prepareCmd": "npm run build"
      }
    ],
    [
      "@semantic-release/npm",
      {
        "npmPublish": true,
        "pkgRoot": ".",
        "registry": "https://npm.pkg.github.com",
        "npmPublishRegistry": "https://npm.pkg.github.com"
      }
    ],
    [
      "@semantic-release/exec",
      {
        "publishCmd": "sh -lc 'echo BEFORE: $(npm config get @growthspace-engineering:registry || echo unset); if [ -f .npmrc ]; then grep -v "^[[:space:]]*@growthspace-engineering:registry=" .npmrc > .npmrc.tmp && mv .npmrc.tmp .npmrc; fi; echo AFTER: $(npm config get @growthspace-engineering:registry || echo unset); npm publish --userconfig $(pwd)/.npmrc --registry https://registry.npmjs.org --tag ${nextRelease.channel || 'latest'} --access public'"
      }
    ],
    [
      "@semantic-release/github",
      {
        "successComment": "This PR is included in version ${nextRelease.version} ðŸŽ‰\n\nThe release is available on:\n- [GitHub Releases](https://github.com/growthspace-engineering/gs-mcp-proxy-pii-redactor/releases/tag/${nextRelease.gitTag})\n- [npm package](https://www.npmjs.com/package/@growthspace-engineering/gs-mcp-proxy-pii-redactor/v/${nextRelease.version})\n- [GitHub Packages](https://github.com/growthspace-engineering/gs-mcp-proxy-pii-redactor/packages)",
        "releasedLabels": false,
        "assets": []
      }
    ],
    [
      "@semantic-release/git",
      {
        "assets": [
          "package.json",
          "package-lock.json"
        ],
        "message": "chore(release): ${nextRelease.version} [skip ci]\n\n${nextRelease.notes}"
      }
    ]
  ]
}
